!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=(d=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(d)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(a," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(o).concat([r]).join("\n")}var d,s,a;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var d=this[o][0];null!=d&&(r[d]=!0)}for(var s=0;s<e.length;s++){var a=[].concat(e[s]);n&&r[a[0]]||(i&&(a[2]?a[2]="".concat(i," and ").concat(a[2]):a[2]=i),t.push(a))}},t}},function(e,t,i){var n=i(2),r=i(3);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},function(e,t,i){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),d=[];function s(e){for(var t=-1,i=0;i<d.length;i++)if(d[i].identifier===e){t=i;break}return t}function a(e,t){for(var i={},n=[],r=0;r<e.length;r++){var o=e[r],a=t.base?o[0]+t.base:o[0],c=i[a]||0,l="".concat(a," ").concat(c);i[a]=c+1;var h=s(l),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(d[h].references++,d[h].updater(u)):d.push({identifier:l,updater:b(u,t),references:1}),n.push(l)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var d=o(e.insert||"head");if(!d)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");d.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var o=document.createTextNode(r),d=e.childNodes;d[t]&&e.removeChild(d[t]),d.length?e.insertBefore(o,d[t]):e.appendChild(o)}}function p(e,t,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var g=null,f=0;function b(e,t){var i,n,r;if(t.singleton){var o=f++;i=g||(g=c(t)),n=u.bind(null,i,o,!1),r=u.bind(null,i,o,!0)}else i=c(t),n=p.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var i=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=s(i[n]);d[r].references--}for(var o=a(e,t),c=0;c<i.length;c++){var l=s(i[c]);0===d[l].references&&(d[l].updater(),d.splice(l,1))}i=o}}}},function(e,t,i){"use strict";i.r(t);var n=i(0),r=i.n(n)()(!1);r.push([e.i,"",""]),t.default=r},function(e,t,i){"use strict";i.r(t);let n=function(e,t){for(let i in t)e.style[i]=t[i]},r=function(e){return e.substr(1)+e.substr(0,1)},o=function(e){let t=[1,3,6,10,15,21,28,40];for(var i=0;i<t.length;i++)if(e<=t[i])return i+1},d=function(e){let t=[1,3,6,10,15,21,28,40];switch(e){case 8:return[0,0];default:return[t[e-2]+1,t[e-1]]}};let s="";s="65px";class a{constructor(e,t,i=!0,n=!1,r=0,o=!1){let d;var s=this;let a=function(){d=document.createElement("div"),this.id=e,this.value=t,this.flip=i,this.focus=n,this.position=r,this.removed=o,d.setAttribute("id",e),d.setAttribute("value",t),this.setStyle(d,c.card),this.setStyle(d,{backgroundImage:"url('./src/images/bg.png')"}),d.addEventListener("mouseover",e=>{e.target===d&&!0!==this.flip&&this.setStyle(d,c.mouseover)}),d.addEventListener("mouseout",e=>{e.target===d&&!0!==this.focus&&!0!==this.flip&&this.setStyle(d,c.mouseout)}),d.addEventListener("click",e=>{if(e.target!==d||!0===d.flip)return;e.stopPropagation();let t=new CustomEvent("clickedCard",{bubbles:!0,detail:s});d.dispatchEvent(t)})}.bind(this);this.getCard=function(){return d},this.attach=function(e){e.appendChild(d)},this.detach=function(){d.parentElement.removeChild(d)},this.handleEvent=function(e,t){d.addEventListener(e,t.bind(null,s))},a()}}a.prototype.setStyle=n;const c={card:{width:""+s,height:"113px",display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},mouseover:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)"},mouseout:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}};class l{constructor(e){this.sidebar=e,this.deck=document.createElement("div"),this.side=document.createElement("div"),this.init(),this.side.addEventListener("click",e=>{e.stopPropagation();let t=new Event("clickedSideDeck");this.side.dispatchEvent(t)}),this.side.addEventListener("mouseover",e=>{e.target===this.side&&""!==this.side.style.backgroundImage&&"none"!==this.side.style.backgroundImage&&n(this.side,h.mouseover)}),this.side.addEventListener("mouseout",e=>{e.target===this.side&&""!==this.side.style.backgroundImage&&"none"!==this.side.style.backgroundImage&&n(this.side,h.mouseout)}),this.deck.addEventListener("click",e=>{e.stopPropagation();let t=new Event("clickedCardDeck",{bubbles:!0});this.deck.dispatchEvent(t)}),this.side.addEventListener("click",e=>{e.stopPropagation();let t=new Event("clickedCardSide",{bubbles:!0});this.side.dispatchEvent(t)})}init(){this.side.setAttribute("id","side"),this.deck.setAttribute("id","deck"),n(this.deck,h.card),n(this.side,h.card),n(this.deck,{backgroundImage:"url('./src/images/bg.png')"}),this.sidebar.appendChild(this.side),this.sidebar.appendChild(this.deck)}getSide(){return this.side}getDeck(){return this.deck}}l.prototype.setStyle=n();const h={card:{width:""+s,height:"113px",display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},mouseover:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)"},mouseout:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},no_border:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderColor:"#d1d1d1"},border:{borderColor:"#19b5fe"},hidden:{visibility:"hidden"}};class u{constructor(e,t){this.deck=[],this.hand=[],this.sideHand=[],this.clickedCard=0,this.content=e,this.sidebar=t,this.sidebar.addEventListener("clickedCardDeck",e=>{if(0===this.hand.length)return;this.sideHand.push(this.hand.pop());let t=this.sideHand.length;0!==t&&(this.setCardImage(this.sideHand[t-1].id,this.getSideHand()),0===this.hand.length&&n(this.getHand(),{backgroundImage:"none"}))}),this.sidebar.addEventListener("clickedCardSide",e=>{let t=this.sideHand.length;0!==t&&this.cardEvent(this.sideHand[t-1],this.getSideHand())}),this.content.addEventListener("clickedCard",e=>{this.cardEvent(e.detail,e.detail.getCard())})}newGame(){let e=new g(this.content);new l(this.sidebar);e.newDeck(),e.shuffle(),this.deck=e.list.slice(0,28),this.hand=e.list.slice(28,40)}generateCard(e){let t=0;for(var i=0;i<6;i++){for(var n=0;n<i+1;n++){let e=this.deck[t];e.position=++t,this.appendToPyramid(e)}let r=document.createElement("br");e.appendChild(r)}for(n=0;n<7;n++){let e=this.deck[t];e.flip=!1,e.position=++t,this.appendToPyramid(e),this.setCardImage(e.id,e.getCard())}for(n=0;n<12;n++){let e=this.hand[n];0===n&&(e.flip=!0,this.setCardImage(e.id,e.getCard())),e.flip=!1,e.position=++t}}appendToPyramid(e){e.attach(this.content)}appendToSidebar(e){e.attach(this.sidebar)}getHand(){return this.sidebar.childNodes[1]}getSideHand(){return this.sidebar.childNodes[0]}setHidden(e){n(e,p.hidden)}setNoBorder(e){n(e,p.no_border)}setBorder(e){n(e,p.border)}setCardImage(e,t){let i=r(e);n(t,{backgroundImage:"url('./src/images/napoletane/"+i+".png')"}),this.setNoBorder(this.getSideHand())}setSideHandNone(){n(this.getSideHand(),{backgroundImage:"none"}),n(this.getSideHand(),p.card),this.setNoBorder(this.getSideHand())}setSideHandByCondition(){this.sideHand.pop();let e=this.sideHand.length;0!==e?(console.log("carta alla fine",e),this.setCardImage(this.sideHand[e-1].id,this.getSideHand())):this.setSideHandNone()}cardEvent(e,t){if(!0===e.flip)return;if(!0===e.focus)return this.clickedCard=0,e.focus=!1,void this.setNoBorder(t);let i=o(e.position),n=d(i-1),r=d(i);if(console.log("sup",r),console.log("inf",n),0===this.clickedCard)10===e.value?(8===i?this.setSideHandByCondition():(this.setHidden(t),this.checkParent(n,r)),e.removed=!0):(e.focus=!0,this.setBorder(t),this.clickedCard=e);else{if(this.clickedCard.value+e.value===10){this.clickedCard.removed=!0,e.removed=!0;let s=o(this.clickedCard.position),a=d(s-1),c=d(s);8===i?(console.log("2 card sulla piramide"),this.setSideHandByCondition(),this.setHidden(this.clickedCard.getCard()),this.checkParent(n,r)):8===s?(console.log("1 card sulla piramide"),this.setSideHandByCondition(),this.setHidden(t),this.checkParent(a,c)):(this.setHidden(t),this.setHidden(this.clickedCard.getCard()),this.checkParent(n,r),this.checkParent(a,c)),this.checkParent(n,r)}else e.focus=!1,this.clickedCard.focus=!1,this.setNoBorder(t),this.setNoBorder(this.clickedCard.getCard());this.clickedCard=0}}checkParent(e,t){if(0===t[0]){this.sideHand.pop();let e=this.sideHand.length;return void(0!==e?this.setCardImage(this.sideHand[e-1].id,this.getSideHand()):this.setSideHandNone())}let i=this.deck.filter((function(t){return t.position<=e[1]&&t.position>=e[0]}));console.log(i.length);let o=this.deck.filter((function(e){return e.position<=t[1]&&e.position>=t[0]}));for(var d=0;d<i.length;d++)if(o[d].removed&&o[d+1].removed){i[d].flip=!1;let e=r(i[d].id);n(i[d].getCard(),{backgroundImage:"url('./src/images/napoletane/"+e+".png')"})}}}const p={no_border:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderColor:"#d1d1d1"},border:{borderColor:"#19b5fe"},hidden:{visibility:"hidden"}};class g{constructor(){this.list=[]}newDeck(){let e=["b","c","d","s"],t=e.length;for(var i=0;i<t;i++)for(var n=1;n<=10;n++)this.list.push(new a(e[i]+n,n))}shuffle(){for(let e=this.list.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.list[e],this.list[t]]=[this.list[t],this.list[e]]}return this.list}}i(1);{let e=function(){let e=document.getElementById("root");n(e,f.context);let t=document.createElement("sidebar");n(t,f.sidebar),e.appendChild(t);let i=document.createElement("section");n(i,f.content),e.appendChild(i);let r=document.createElement("div");n(r,f.button),e.appendChild(r);let o=new u(i,t);o.newGame(),o.generateCard(i)};window.addEventListener("load",e,!1)}const f={context:{position:"fixed",top:0,left:0,right:0,bottom:0,minHeight:"360px",minWidth:"740px"},sidebar:{position:"absolute",top:"80%",right:0,left:0,bottom:0,backgroundImage:"url('./src/images/sidebar.png')",padding:"15px",textAlign:"center",vspace:100},content:{position:"absolute",top:0,right:0,left:0,bottom:"20%",background:"url('./src/images/green_felt.jpg')",padding:"15px",paddingTop:"3%",textAlign:"center"},card:{height:"113px",width:"65px",display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center"},button:{height:"40px",width:"40px",position:"relative",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d1d1",marginTop:"15px",marginLeft:"15px",backgroundImage:"url('./src/images/refresh-arrow.png')"}}}]);