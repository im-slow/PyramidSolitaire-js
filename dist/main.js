!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=(o=n,d=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(d),"/*# ".concat(a," */")),s=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(s).concat([r]).join("\n")}var o,d,a;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(r[o]=!0)}for(var d=0;d<e.length;d++){var a=[].concat(e[d]);n&&r[a[0]]||(i&&(a[2]?a[2]="".concat(i," and ").concat(a[2]):a[2]=i),t.push(a))}},t}},function(e,t,i){var n=i(2),r=i(3);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};n(r,s);e.exports=r.locals||{}},function(e,t,i){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),o=[];function d(e){for(var t=-1,i=0;i<o.length;i++)if(o[i].identifier===e){t=i;break}return t}function a(e,t){for(var i={},n=[],r=0;r<e.length;r++){var s=e[r],a=t.base?s[0]+t.base:s[0],c=i[a]||0,l="".concat(a," ").concat(c);i[a]=c+1;var h=d(l),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(u)):o.push({identifier:l,updater:b(u,t),references:1}),n.push(l)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=s(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function p(e,t,i){var n=i.css,r=i.media,s=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var g=null,f=0;function b(e,t){var i,n,r;if(t.singleton){var s=f++;i=g||(g=c(t)),n=u.bind(null,i,s,!1),r=u.bind(null,i,s,!0)}else i=c(t),n=p.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var i=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=d(i[n]);o[r].references--}for(var s=a(e,t),c=0;c<i.length;c++){var l=d(i[c]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}i=s}}}},function(e,t,i){"use strict";i.r(t);var n=i(0),r=i.n(n)()(!1);r.push([e.i,"",""]),t.default=r},function(e,t,i){"use strict";i.r(t);let n=function(e,t){for(let i in t)e.style[i]=t[i]},r=function(e){return e.substr(1)+e.substr(0,1)},s=function(e){let t=[1,3,6,10,15,21,28,40];for(var i=0;i<=t.length-1;i++)if(e<=t[i])return i+1},o=function(e){let t=[1,3,6,10,15,21,28,40];switch(e){case 8:return[0,0];default:return[t[e-2]+1,t[e-1]]}};let d="";d="65px";class a{constructor(e,t,i=!0,n=!1,r=0,s=!1){let o;var d=this;let a=function(){o=document.createElement("div"),this.id=e,this.value=t,this.flip=i,this.focus=n,this.position=r,this.removed=s,o.setAttribute("id",e),o.setAttribute("value",t),this.setStyle(o,c.card),this.setStyle(o,{backgroundImage:"url('./src/images/bg.png')"}),o.addEventListener("mouseover",e=>{e.target===o&&!0!==this.flip&&this.setStyle(o,c.mouseover)}),o.addEventListener("mouseout",e=>{e.target===o&&!0!==this.focus&&!0!==this.flip&&this.setStyle(o,c.mouseout)}),o.addEventListener("click",e=>{if(e.target!==o||!0===o.flip)return;e.stopPropagation();let t=new CustomEvent("clickedCard",{bubbles:!0,detail:d});o.dispatchEvent(t)})}.bind(this);this.getCard=function(){return o},this.attach=function(e){e.appendChild(o)},this.detach=function(){o.parentElement.removeChild(o)},this.handleEvent=function(e,t){o.addEventListener(e,t.bind(null,d))},a()}}a.prototype.setStyle=n;const c={card:{width:""+d,height:"113px",display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},mouseover:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)"},mouseout:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}};class l{constructor(e){this.sidebar=e,this.deck=document.createElement("div"),this.side=document.createElement("div"),this.init(),this.side.addEventListener("click",e=>{e.stopPropagation();let t=new Event("clickedSideDeck");this.side.dispatchEvent(t)}),this.side.addEventListener("mouseover",e=>{e.target===this.side&&""!==this.side.style.backgroundImage&&"none"!==this.side.style.backgroundImage&&n(this.side,h.mouseover)}),this.side.addEventListener("mouseout",e=>{e.target===this.side&&""!==this.side.style.backgroundImage&&"none"!==this.side.style.backgroundImage&&n(this.side,h.mouseout)}),this.deck.addEventListener("click",e=>{e.stopPropagation();let t=new Event("clickedCardDeck",{bubbles:!0});this.deck.dispatchEvent(t)}),this.side.addEventListener("click",e=>{e.stopPropagation();let t=new Event("clickedCardSide",{bubbles:!0});this.side.dispatchEvent(t)})}init(){this.side.setAttribute("id","side"),this.deck.setAttribute("id","deck"),n(this.deck,h.card),n(this.side,h.card),n(this.deck,{backgroundImage:"url('./src/images/bg.png')"}),this.sidebar.appendChild(this.side),this.sidebar.appendChild(this.deck)}getSide(){return this.side}getDeck(){return this.deck}}l.prototype.setStyle=n();const h={card:{width:""+d,height:"113px",display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},mouseover:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)"},mouseout:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},no_border:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderColor:"#d1d1d1"},border:{borderColor:"#19b5fe"},hidden:{visibility:"hidden"}};class u{constructor(e){this.content=e,this.splash=document.createElement("div"),this.button=document.createElement("div"),this.init()}init(){n(this.splash,p.splash),this.content.parentNode.append(this.splash),n(this.button,p.button),this.button.innerText="New Game",this.button.addEventListener("click",e=>{window.location.reload()}),this.splash.appendChild(this.button)}setWin(){n(this.splash,{backgroundImage:"url('./src/images/win.png')"})}setLose(){n(this.splash,{backgroundImage:"url('./src/images/lose.png')"})}}const p={splash:{position:"absolute",textAlign:"center",top:0,left:0,right:0,bottom:0,minHeight:"360px",minWidth:"360px",padding:"30px",margin:"30px",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",display:"flex",justifyContent:"center"},button:{height:"20px",width:"100px",position:"absolute",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d1d1",cursor:"pointer",backgroundColor:"#e7e7e7",textAlign:"center",top:"50%",marginTop:"10%"}};class g{constructor(e,t){this.deck=[],this.hand=[],this.sideHand=[],this.clickedCard=0,this.content=e,this.sidebar=t,this.sidebar.addEventListener("clickedCardDeck",e=>{if(0===this.hand.length)return;this.sideHand.push(this.hand.pop());let t=this.sideHand.length;0!==t&&(this.setCardImage(this.sideHand[t-1].id,this.getSideHand()),0===this.hand.length&&n(this.getHand(),{backgroundImage:"none"}))}),this.sidebar.addEventListener("clickedCardSide",e=>{let t=this.sideHand.length;0!==t&&this.cardEvent(this.sideHand[t-1],this.getSideHand())}),this.content.addEventListener("clickedCard",e=>{this.cardEvent(e.detail,e.detail.getCard())})}newGame(){let e=new b(this.content);new l(this.sidebar);e.newDeck(),e.shuffle(),this.deck=e.list.slice(0,28),this.hand=e.list.slice(28,40)}generateCard(e){let t=0;for(var i=0;i<6;i++){for(var n=0;n<i+1;n++){let e=this.deck[t];e.position=++t,this.appendToPyramid(e)}let r=document.createElement("br");e.appendChild(r)}for(n=0;n<7;n++){let e=this.deck[t];e.flip=!1,e.position=++t,this.appendToPyramid(e),this.setCardImage(e.id,e.getCard())}for(n=0;n<12;n++){let e=this.hand[n];0===n&&(e.flip=!0,this.setCardImage(e.id,e.getCard())),e.flip=!1,e.position=++t}}appendToPyramid(e){e.attach(this.content)}appendToSidebar(e){e.attach(this.sidebar)}getHand(){return this.sidebar.childNodes[1]}getSideHand(){return this.sidebar.childNodes[0]}setHidden(e){n(e,f.hidden)}setNoBorder(e){n(e,f.no_border)}setBorder(e){n(e,f.border)}setCardImage(e,t){let i=r(e);n(t,{backgroundImage:"url('./src/images/napoletane/"+i+".png')"}),this.setNoBorder(this.getSideHand())}setSideHandNone(){n(this.getSideHand(),{backgroundImage:"none"}),n(this.getSideHand(),f.card),this.setNoBorder(this.getSideHand())}setSideHandByCondition(){this.sideHand.pop();let e=this.sideHand.length;0!==e?this.setCardImage(this.sideHand[e-1].id,this.getSideHand()):this.setSideHandNone()}cardEvent(e,t){if(!0===e.flip)return;if(!0===e.focus)return this.clickedCard=0,e.focus=!1,void this.setNoBorder(t);let i=s(e.position),n=o(i-1),r=o(i);if(0===this.clickedCard)10===e.value?(e.removed=!0,8===i?this.setSideHandByCondition():(this.setHidden(t),this.checkParent(n,r))):(e.focus=!0,this.setBorder(t),this.clickedCard=e);else{if(this.clickedCard.value+e.value===10){this.clickedCard.removed=!0,e.removed=!0;let d=s(this.clickedCard.position),a=o(d-1),c=o(d);8===i?(this.setSideHandByCondition(),this.setHidden(this.clickedCard.getCard()),this.checkParent(a,c)):8===d?(this.setSideHandByCondition(),this.setHidden(t),this.checkParent(n,r)):(this.setHidden(t),this.setHidden(this.clickedCard.getCard()),this.checkParent(n,r),this.checkParent(a,c))}else e.focus=!1,this.clickedCard.focus=!1,this.setNoBorder(t),this.setNoBorder(this.clickedCard.getCard());this.clickedCard=0}0===this.hand.length&&this.checkMove()}checkParent(e,t){if(0===t[0]){this.sideHand.pop();let e=this.sideHand.length;return void(0!==e?this.setCardImage(this.sideHand[e-1].id,this.getSideHand()):this.setSideHandNone())}let i=this.deck.filter((function(t){return t.position<=e[1]&&t.position>=e[0]})),s=this.deck.filter((function(e){return e.position<=t[1]&&e.position>=t[0]}));for(var o=0;o<i.length;o++)if(s[o].removed&&s[o+1].removed){i[o].flip=!1;let e=r(i[o].id);n(i[o].getCard(),{backgroundImage:"url('./src/images/napoletane/"+e+".png')"})}}checkMove(){let e=this.deck.filter((function(e){return!1===e.removed&&!1===e.flip}));if(0!==e.length){0!==this.sideHand.length&&e.push(this.sideHand[this.sideHand.length-1]);for(let t=0;t<e.length;t++)if(10===e[t].value)return;for(let t=0;t<e.length;t++)for(let i=0;i<e.length;i++)if(e[t].value+e[i].value===10&&t!==i)return;new u(this.content).setLose()}else{new u(this.content).setWin()}}}const f={no_border:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderColor:"#d1d1d1"},border:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)",borderColor:"#19b5fe"},hidden:{visibility:"hidden"}};class b{constructor(){this.list=[]}newDeck(){let e=["b","c","d","s"],t=e.length;for(var i=0;i<t;i++)for(var n=1;n<=10;n++)this.list.push(new a(e[i]+n,n))}shuffle(){for(let e=this.list.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.list[e],this.list[t]]=[this.list[t],this.list[e]]}return this.list}}i(1);{let e=function(){let e=document.getElementById("root");n(e,m.context);let t=document.createElement("sidebar");n(t,m.sidebar),e.appendChild(t);let i=document.createElement("section");n(i,m.content),e.appendChild(i);let r=new g(i,t);r.newGame(),r.generateCard(i)};window.addEventListener("load",e,!1)}const m={context:{position:"fixed",top:0,left:0,right:0,bottom:0,minHeight:"360px",minWidth:"600px"},sidebar:{position:"absolute",top:"80%",right:0,left:0,bottom:0,backgroundImage:"url('./src/images/sidebar.png')",padding:"15px",textAlign:"center",vspace:100},content:{position:"absolute",top:0,right:0,left:0,bottom:"20%",background:"url('./src/images/green_felt.jpg')",padding:"3%",paddingTop:"3%",paddingBottom:"",textAlign:"center",marginRight:"-0.25em",marginLeft:"-0.25em"},card:{height:"113px",width:"65px",display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center"}}}]);