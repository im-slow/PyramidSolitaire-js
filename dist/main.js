!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=(s=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(d," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(o).concat([r]).join("\n")}var s,a,d;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var d=[].concat(e[a]);n&&r[d[0]]||(i&&(d[2]?d[2]="".concat(i," and ").concat(d[2]):d[2]=i),t.push(d))}},t}},function(e,t,i){var n=i(2),r=i(3);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},function(e,t,i){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),s=[];function a(e){for(var t=-1,i=0;i<s.length;i++)if(s[i].identifier===e){t=i;break}return t}function d(e,t){for(var i={},n=[],r=0;r<e.length;r++){var o=e[r],d=t.base?o[0]+t.base:o[0],c=i[d]||0,l="".concat(d," ").concat(c);i[d]=c+1;var h=a(l),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(s[h].references++,s[h].updater(u)):s.push({identifier:l,updater:b(u,t),references:1}),n.push(l)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var g=null,f=0;function b(e,t){var i,n,r;if(t.singleton){var o=f++;i=g||(g=c(t)),n=u.bind(null,i,o,!1),r=u.bind(null,i,o,!0)}else i=c(t),n=p.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var i=d(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=a(i[n]);s[r].references--}for(var o=d(e,t),c=0;c<i.length;c++){var l=a(i[c]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}i=o}}}},function(e,t,i){"use strict";i.r(t);var n=i(0),r=i.n(n)()(!1);r.push([e.i,"",""]),t.default=r},function(e,t,i){"use strict";i.r(t);i(1);let n=function(e,t){for(let i in t)e.style[i]=t[i]},r=function(e){return e.substr(1)+e.substr(0,1)},o=function(e){let t=[1,3,6,10,15,21,28,40];for(var i=0;i<=t.length-1;i++)if(e<=t[i])return i+1},s=function(e){let t=[1,3,6,10,15,21,28,40];switch(e){case 8:return[0,0];case 1:return[1,1];default:return[t[e-2]+1,t[e-1]]}};let a=screen.width<=768?1.1:1,d=screen.width<=768?10:1,c="";c=65*a+"px";const l=113*a+"px";class h{constructor(e){this.sidebar=e,this.deck=document.createElement("div"),this.side=document.createElement("div"),this.init(),this.side.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let t=new Event("clickedSideDeck");this.side.dispatchEvent(t)}),this.side.addEventListener("mouseover",e=>{e.target===this.side&&""!==this.side.style.backgroundImage&&"none"!==this.side.style.backgroundImage&&(e.preventDefault(),e.stopPropagation(),n(this.side,u.mouseover))}),this.side.addEventListener("mouseout",e=>{e.target===this.side&&""!==this.side.style.backgroundImage&&"none"!==this.side.style.backgroundImage&&(e.preventDefault(),e.stopPropagation(),n(this.side,u.mouseout))}),this.deck.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let t=new Event("clickedCardDeck",{bubbles:!0});this.deck.dispatchEvent(t)}),this.side.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let t=new Event("clickedCardSide",{bubbles:!0});this.side.dispatchEvent(t)})}init(){this.side.setAttribute("id","side"),this.deck.setAttribute("id","deck"),n(this.deck,u.card),n(this.side,u.card),n(this.deck,{backgroundImage:"url('./src/images/bg.png')"}),this.sidebar.appendChild(this.side),this.sidebar.appendChild(this.deck)}getSide(){return this.side}getDeck(){return this.deck}}h.prototype.setStyle=n();const u={card:{width:""+c,height:""+l,display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},mouseover:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)"},mouseout:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},no_border:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderColor:"#d1d1d1"},border:{borderColor:"#19b5fe"},hidden:{visibility:"hidden"}};class p{constructor(e,t,i=!0,n=!1,r=0,o=!1){let s;var a=this;let d=function(){s=document.createElement("div"),this.id=e,this.value=t,this.flip=i,this.focus=n,this.position=r,this.removed=o,s.setAttribute("id",e),s.setAttribute("value",t),this.setStyle(s,g.card),this.setStyle(s,{backgroundImage:"url('./src/images/bg.png')"}),s.addEventListener("mouseover",e=>{e.preventDefault(),e.stopPropagation(),e.target===s&&!0!==this.flip&&this.setStyle(s,g.mouseover)}),s.addEventListener("mouseout",e=>{e.preventDefault(),e.stopPropagation(),e.target===s&&!0!==this.focus&&!0!==this.flip&&this.setStyle(s,g.mouseout)}),s.addEventListener("click",e=>{if(e.target!==s||!0===s.flip)return;e.preventDefault(),e.stopPropagation();let t=new CustomEvent("clickedCard",{bubbles:!0,detail:a});s.dispatchEvent(t)})}.bind(this);this.getCard=function(){return s},this.attach=function(e){e.appendChild(s)},this.detach=function(){s.parentElement.removeChild(s)},this.handleEvent=function(e,t){s.addEventListener(e,t.bind(null,a))},d()}}p.prototype.setStyle=n;const g={card:{width:""+c,height:""+l,display:"inline-block",marginBottom:"-50px",marginLeft:"5px",marginRight:"5px",borderStyle:"solid",borderColor:"#d1d1d1",borderWidth:"2px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",position:"relative",verticalAlign:"middle",textAlign:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},mouseover:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)"},mouseout:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}};class f{constructor(){this.list=[]}newDeck(){let e=["b","c","d","s"],t=e.length;for(var i=0;i<t;i++)for(var n=1;n<=10;n++)this.list.push(new p(e[i]+n,n))}shuffle(){for(let e=this.list.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.list[e],this.list[t]]=[this.list[t],this.list[e]]}return this.list}}class b{constructor(e){this.content=e,this.splash=document.createElement("div"),this.button=document.createElement("div"),this.init()}init(){n(this.splash,m.splash),this.content.parentNode.append(this.splash),n(this.button,m.alternative_button),this.button.innerText="NEW GAME",this.button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),window.location.reload()}),this.splash.appendChild(this.button)}setWin(){n(this.splash,{backgroundImage:"url('./src/images/win.png')"})}setLose(){n(this.splash,{backgroundImage:"url('./src/images/lose.png')"})}}const m={splash:{position:"absolute",textAlign:"center",top:0,left:0,right:0,bottom:0,minHeight:"360px",minWidth:"360px",padding:"30px",margin:"30px",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",display:"flex",justifyContent:"center",transform:"scale(0.8)"},button:{height:"20px",width:"100px",position:"absolute",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"12px",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d1d1",cursor:"pointer",backgroundColor:"#e7e7e7",textAlign:"center",top:"66%"},alternative_button:{height:"30px",width:"140px",position:"absolute",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"8px",borderWidth:"1px",borderStyle:"inset",borderColor:"#f0d000",cursor:"pointer",backgroundColor:"#721b1b",textAlign:"center",top:"60%",fontSize:"x-large",fontFamily:"lucida console",color:"#ffcc32",marginTop:"2.5em"}};class v{constructor(e,t){this.deck=[],this.hand=[],this.sideHand=[],this.clickedCard=0,this.content=e,this.sidebar=t,this.sidebar.addEventListener("clickedCardDeck",e=>{if(e.stopPropagation(),0===this.hand.length)return;this.sideHand.push(this.hand.pop());let t=this.sideHand.length;0!==t&&(this.setCardImage(this.sideHand[t-1].id,this.getSideHand()),0===this.hand.length&&(n(this.getHand(),{backgroundImage:"none"}),this.checkMove()))}),this.sidebar.addEventListener("clickedCardSide",e=>{e.stopPropagation();let t=this.sideHand.length;0!==t&&this.cardEvent(this.sideHand[t-1],this.getSideHand())}),this.content.addEventListener("clickedCard",e=>{e.stopPropagation(),this.cardEvent(e.detail,e.detail.getCard())})}newGame(){let e=new f(this.content);new h(this.sidebar);e.newDeck(),e.shuffle(),this.deck=e.list.slice(0,28),this.hand=e.list.slice(28,40)}generateCard(e){let t=0;for(var i=0;i<6;i++){for(var n=0;n<i+1;n++){let e=this.deck[t];e.position=++t,this.appendToPyramid(e)}let r=document.createElement("br");e.appendChild(r)}for(n=0;n<7;n++){let e=this.deck[t];e.flip=!1,e.position=++t,this.appendToPyramid(e),this.setCardImage(e.id,e.getCard())}for(n=0;n<12;n++){let e=this.hand[n];0===n&&(e.flip=!0,this.setCardImage(e.id,e.getCard())),e.flip=!1,e.position=++t}}appendToPyramid(e){e.attach(this.content)}appendToSidebar(e){e.attach(this.sidebar)}getHand(){return this.sidebar.childNodes[1]}getSideHand(){return this.sidebar.childNodes[0]}setHidden(e){n(e,x.hidden)}setNoBorder(e){n(e,x.no_border)}setBorder(e){n(e,x.border)}setCardImage(e,t){let i=r(e);n(t,{backgroundImage:"url('./src/images/napoletane/"+i+".png')"}),this.setNoBorder(this.getSideHand())}setSideHandNone(){n(this.getSideHand(),{backgroundImage:"none"}),n(this.getSideHand(),x.card),this.setNoBorder(this.getSideHand())}setSideHandByCondition(){this.sideHand.pop();let e=this.sideHand.length;0!==e?this.setCardImage(this.sideHand[e-1].id,this.getSideHand()):this.setSideHandNone()}cardEvent(e,t){if(!0===e.flip)return;if(!0===e.focus)return this.clickedCard=0,e.focus=!1,void this.setNoBorder(t);let i=o(e.position),n=s(i-1),r=s(i);if(0===this.clickedCard)10===e.value?(e.removed=!0,8===i?this.setSideHandByCondition():(this.setHidden(t),this.checkParent(n,r))):(e.focus=!0,this.setBorder(t),this.clickedCard=e);else{if(this.clickedCard.value+e.value===10){this.clickedCard.removed=!0,e.removed=!0;let a=o(this.clickedCard.position),d=s(a-1),c=s(a);8===i?(this.setSideHandByCondition(),this.setHidden(this.clickedCard.getCard()),this.checkParent(d,c)):8===a?(this.setSideHandByCondition(),this.setHidden(t),this.checkParent(n,r)):(this.setHidden(t),this.setHidden(this.clickedCard.getCard()),this.checkParent(n,r),this.checkParent(d,c))}else e.focus=!1,this.clickedCard.focus=!1,this.setNoBorder(t),this.setNoBorder(this.clickedCard.getCard());this.clickedCard=0}0===this.hand.length&&this.checkMove()}checkParent(e,t){if(0===t[0]){this.sideHand.pop();let e=this.sideHand.length;return void(0!==e?this.setCardImage(this.sideHand[e-1].id,this.getSideHand()):this.setSideHandNone())}let i=this.deck.filter((function(t){return t.position<=e[1]&&t.position>=e[0]})),o=this.deck.filter((function(e){return e.position<=t[1]&&e.position>=t[0]}));for(var s=0;s<i.length;s++)if(o[s].removed&&o[s+1].removed){i[s].flip=!1;let e=r(i[s].id);n(i[s].getCard(),{backgroundImage:"url('./src/images/napoletane/"+e+".png')"})}}checkMove(){let e=this.deck.filter((function(e){return!1===e.removed&&!1===e.flip}));if(0!==e.length){0!==this.sideHand.length&&e.push(this.sideHand[this.sideHand.length-1]);for(let t=0;t<e.length;t++)if(10===e[t].value)return;for(let t=0;t<e.length;t++)for(let i=0;i<e.length;i++)if(e[t].value+e[i].value===10&&t!==i)return;new b(this.content).setLose()}else{new b(this.content).setWin()}}}const x={no_border:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderColor:"#d1d1d1"},border:{boxShadow:"0px 0px 2px 2px rgba(197,239,247,1)",borderColor:"#19b5fe"},hidden:{visibility:"hidden"}};{let e=function(){let e=document.getElementById("root");n(e,k.context);let t=document.createElement("sidebar");n(t,k.sidebar),e.appendChild(t);let i=document.createElement("section");n(i,k.content),e.appendChild(i);let r=new v(i,t);r.newGame(),r.generateCard(i)};window.addEventListener("load",e,!1)}const k={context:{position:"fixed",top:0,left:0,right:0,bottom:0,minHeight:"720px",minWidth:"600px"},sidebar:{position:"absolute",top:"80%",right:0,left:0,bottom:0,backgroundImage:"url('./src/images/sidebar.png')",padding:"15px",textAlign:"center",vspace:100,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center"},content:{position:"absolute",top:0,right:0,left:0,bottom:"20%",background:"url('./src/images/green_felt.jpg')",paddingTop:3*d+"%",paddingBottom:"",textAlign:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",marginRight:"-0.25em",marginLeft:"-0.25em"}}}]);